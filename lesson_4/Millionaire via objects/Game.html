<script>
	var millionaire = {
		welcome : 'Добро пожаловать в игру "Кто хочет стать миллионером?"\n В качестве ответа используйте число, указанное напротив выбранного вами варианта.\n Удачи!\n\n\n ',
		levels : [500, 1000, 2000, 3000, 5000, 10000, 15000, 25000, 50000, 100000, 200000, 400000, 800000, 1500000, 3000000],
		getSafeSum : function(){
			var string = this.welcome + 'Укажите несгораемую сумму:\n';
			for(var i=this.levels.length;i>0;i--)
				string += i+'. '+this.levels[i-1]+' руб\n';
			string += '\n -1 - для выхода из игры.';
			var event, ok;
			do{
				event = +prompt(string);
				if (event==-1)
					return false;
				ok = this.isAnswer(event, this.levels.length);
			}while(!ok)
			this.safeSum = this.levels[event-1];
			return true;
		},
		isAnswer : function(event,q){
			if (isNaN(event) || !isFinite(event)) {
				alert('Вы ввели недопустимый символ');
				return false;
			}
			else if (event < 1 || event > q) {
				alert('Ваше число выходит из допустимого диапозона');
				return false;
			}
			else if (event !== parseInt(event)){
				alert('Введите целое число');
				return false;
			}{
				return true;
			}
		},
		questions : [
			
			'Что помогало людям писать до изобретения шариковых ручек?\n',
			'1. Пух\n',
			'2. Перья\n',
			'3. Мех\n',
			'4. Чешуя\n',
			2,
			
			'Что располагается на нотном стане?\n',
			'1. Перец\n',
			'2. Корица\n',
			'3. Сахар\n',
			'4. Соль\n',
			4,
			
			'Кто фигурирует в в присказке, помогающий запомнить цвета радуги?\n',
			'1. Рыбак\n',
			'2. Охотник\n',
			'3. Садовник\n',
			'4. Пчеловод\n',
			2,
			
			'Что извещает о начале раунда в игре «Что? Где? Когда?»?\n',
			'1. Колокол\n',
			'2. Гонг\n',
			'3. Стартовый пистолет\n',
			'4. Кремлёвские куранты\n',
			2,
			
			'Кого, по словам Мазепы, не стоит впрягать в одну телегу вместе с конём?\n',
			'1. Трепетную лань\n',
			'2. Выносливого верблюда\n',
			'3. Упрямого осла\n',
			'4. Неуправляемого страуса\n',
			1,
			
			'Каким режиссер Владимир Бортко намеренно сделал фильм «Собачье сердце»?\n',
			'1. Чёрно-белым\n',
			'2. Раскрашенным вручную\n',
			'3. Немым\n',
			'4. Музыкальным\n',
			1,
			
			'Что практически отсутствует у кошек породы бобтейл?\n',
			'1. Уши\n',
			'2. Усы\n',
			'3. Хвост\n',
			'4. Когти\n',
			3,
			
			'Что такое феод, давший название феодалам?\n',
			'1. Меч\n',
			'2. Жалованье\n',
			'3. Земельное владение\n',
			'4. Военный отряд\n',
			3,
			
			'Что бросились скупать американцы в 1973 году, после того как Джонни Карсон пошутил в своем ток-шоу о дефиците?\n',
			'1. Соль\n',
			'2. Мыло\n',
			'3. Туалетную бумагу\n',
			'4. Спички\n',
			3,
			
			'Кем служил Сергей Есенин на Первой мировой войне?\n',
			'1. Санитаром\n',
			'2. Писарем\n',
			'3. Поваром\n',
			'4. Адъютантом\n',
			1,
			
			'Кому датчане установили памятник в замке Розенборг в Копенгагене?\n',
			'1. Нильсу Бору\n',
			'2. Ларсу фон Триеру\n',
			'3. Питеру Шмейхелю\n',
			'4. Хансу Кристиану Андерсену\n',
			4,
			
			'На каком континенте находится Карибское ущелье?\n',
			'1. Северная Америка\n',
			'2. Южная Америка\n',
			'3. Африка\n',
			'4. Антарктида\n',
			3,
			
			'Какой шахматист написал книгу «Настольные игры народов»?\n',
			'1. Ботвинник\n',
			'2. Ласкер\n',
			'3. Капабланка\n',
			'4. Алехин\n',
			2,
			
			'Как называется шлюзовой отсек Международной космической станции?\n',
			'1. «Лабиринт»\n',
			'2. «Ребус»\n',
			'3. «Пазл»\n',
			'4. «Квест»\n',
			4,
			
			'Какой вид кавалерии предназначался для боевых действий как в конном, так и в пешем строю?\n',
			'1. Кирасиры\n',
			'2. Уланы\n',
			'3. Драгуны\n',
			'4. Гусары\n',
			3
			
		],
		askQuestions : function(){
			var string, event, ok;
			for(var i=0;i<this.levels.length;i++){
				if (this.safeSum == this.levels[i]){
					string = 'Вопрос №'+(i+1)+' на НЕСГОРАЕММУЮ сумму '+this.levels[i]+'рублей\n\n';
				} 
				else {
					string = 'Вопрос №'+(i+1)+' на сумму '+this.levels[i]+'рублей\n\n';
				}
				if (this.safeSum < this.levels[i])
					string += 'Несгораемая сумма ' + this.safeSum + 'руб. УЖЕ преодолена! \n\n';
				string += this.questions[i*6]+this.questions[i*6+1]+this.questions[i*6+2]+this.questions[i*6+3]+this.questions[i*6+4];
				if(i==0){
					string += '\n -1 - покинуть игру';
				}
				else{
					string += '\n -1 - покинуть игру и забрать '+this.levels[i-1]+' РУБЛЕЙ';
				}
				do{
					event = +prompt(string);
					if (event == -1){
						if (i!==0)
							this.won = this.levels[i-1];
						return;
					}
					ok = this.isAnswer(event, 4)
				}while(!ok)
				if (event == this.questions[i*6+5] && (this.safeSum==this.levels[i]||i==this.levels.length-1))
					this.won = this.levels[i];
				if (event !== this.questions[i*6+5]){
					this.questions[i*6+this.questions[i*6+5]] = this.questions[i*6+this.questions[i*6+5]].trimRight()+' - ПРАВИЛЬНЫЙ ОТВЕТ. \n'
					alert('К сожалению, вы допустили ошибку:\n\n'+this.questions[i*6]+this.questions[i*6+1]+this.questions[i*6+2]+this.questions[i*6+3]+this.questions[i*6+4]);
					break;
				}
			}
			return;
		},
		getResult : function(){
			if (this.won){
				if (this.won == this.levels[this.levels.length-1]){
					alert('Поздравляем! Вы становитесь победителем игры "Кто хочет стать миллионером?" и забираете с собой '+this.won+' РУБЛЕЙ.');
				}
				else {
					alert('Поздравляем! Вы выиграли '+this.won+' РУБЛЕЙ. \n\n');
				}
			}
			else{
				alert('Спасибо за игру!');
			}
		},
		start : function(){
			if(this.getSafeSum())
				this.askQuestions();
			this.getResult();
		}
	};
	millionaire.start();
</script>

